<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ—¶ä»£å¤§è¿›åŒ–ç§¯åˆ†è®¡ç®—å™¨</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <style>
      .info-panel {
        margin-top: 30px;
        padding: 20px;
        background-color: #f7f7f7;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .info-panel h2 {
        font-size: 22px;
        color: #333;
        margin-bottom: 15px;
      }
      .info-panel p {
        font-size: 16px;
        color: #555;
        line-height: 1.8;
        text-align: left;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <button
        class="back-home-button"
        onclick="window.location.href='index.html'"
      >
        å›åˆ°é¦–é¡µ
      </button>
      <h1>
        æ—¶ä»£å¤§è¿›åŒ–ç§¯åˆ†è®¡ç®—å™¨<br />
        <a
          href="#tutorial"
          style="
            font-size: 14px;
            color: #1a73e8;
            text-decoration: underline;
            cursor: pointer;
          "
        >
          â¡ï¸ğŸ‘‰ ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯·ç‚¹æˆ‘æŸ¥çœ‹è¯´æ˜æ•™ç¨‹ ğŸ‘ˆâ¬…ï¸
        </a>
      </h1>

      <div class="input-container">
        <label for="currentPointsValue">ä½ çš„ã€å½“å‰ç§¯åˆ†ã€‘æ•°å€¼</label>
        <input
          type="number"
          id="currentPointsValue"
          placeholder="å¦‚ 5678 æˆ– 1.67ï¼ˆè‡ªåŠ¨åŒ¹é…å•ä½ï¼šäº¿ï¼‰"
          step="0.01"
          min="0"
        />
      </div>

      <div class="input-container">
        <label for="randomResourceCard">ã€éšæœºèµ„æºå¡ã€‘æ•°é‡</label>
        <input
          type="number"
          id="randomResourceCard"
          placeholder="å¦‚ 5678 æˆ– 4.25ï¼ˆè‡ªåŠ¨åŒ¹é…å•ä½ï¼šä¸‡ï¼‰"
          step="0.001"
          min="0"
        />
      </div>

      <div class="input-container">
        <label for="selectedResourceCard">ã€è‡ªé€‰èµ„æºå¡ã€‘æ•°é‡</label>
        <input
          type="number"
          id="selectedResourceCard"
          placeholder="å¦‚ 1234 æˆ– 1.25ï¼ˆè‡ªåŠ¨åŒ¹é…å•ä½ï¼šä¸‡ï¼‰"
          step="0.001"
          min="0"
        />
      </div>

      <div class="input-container">
        <label for="landDeed">ã€åœ°å¥‘ã€‘æ•°é‡</label>
        <input
          type="number"
          id="landDeed"
          placeholder="å¦‚ 3456 æˆ– 1.002ï¼ˆè‡ªåŠ¨åŒ¹é…å•ä½ï¼šä¸‡ï¼‰"
          step="0.001"
          min="0"
        />
      </div>

      <div class="input-container">
        <label for="techResearchCardCount">ã€ç”¨äºæŠ€æœ¯ç ”ç©¶çš„åŠ é€Ÿå¡ã€‘æ•°é‡</label>
        <input
          type="number"
          id="techResearchCardCount"
          placeholder="å¦‚ 5000 æˆ– 1.25ï¼ˆè‡ªåŠ¨åŒ¹é…å•ä½ï¼šä¸‡ï¼‰"
          step="0.001"
          min="0"
        />
      </div>

      <div class="input-container">
        <label for="fineResearchCardCount">ã€ç”¨äºç²¾ç»†ç ”ç©¶çš„åŠ é€Ÿå¡ã€‘æ•°é‡</label>
        <input
          type="number"
          id="fineResearchCardCount"
          placeholder="å¦‚ 3200 æˆ– 0.8ï¼ˆè‡ªåŠ¨åŒ¹é…å•ä½ï¼šä¸‡ï¼‰"
          step="0.001"
          min="0"
        />
      </div>

      <div class="input-container">
        <label for="advisorSelections">ã€é¡¾é—®é€‰æ‹”ã€‘æ¬¡æ•°</label>
        <input
          type="number"
          id="advisorSelections"
          placeholder="å¦‚ 123456"
          step="0.001"
          min="0"
        />
      </div>

      <button onclick="calculatePoints()">è®¡ç®—ç§¯åˆ†</button>

      <div class="result" id="result"></div>

      <div class="info-panel" id="tutorial">
        <h2>è¯´æ˜</h2>
        <p>
          <strong>æœ€ä¼˜ä½¿ç”¨æƒ…å†µï¼š</strong><br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”¨äºè®¡ç®—å½“ä¸‹çš„ç§¯åˆ†æƒ…å†µï¼Œä»è€Œå†³å®šæ˜¯å¦å†²æ¦œã€‚<br />
          <strong>è¯¯å·®è¯´æ˜ï¼š</strong><br />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åº•å±‚å®ç°äº†åŸºæœ¬é“å…·çš„å¯è½¬æ¢çš„ç§¯åˆ†ï¼Œå¯¹äºéšæ—¶é—´å¢é•¿çš„ç§¯åˆ†äº¦æˆ–æ˜¯å…¶ä»–èµ„æºè·å–æ¸ é“çš„ç§¯åˆ†ï¼Œå¹¶æœªç»Ÿè®¡ä¹Ÿä¸æ–¹ä¾¿ç»Ÿè®¡ï¼Œ
          è®¡ç®—ç»“æœä¸ºä½ è¾“å…¥çš„èµ„æºéƒ½ç”¨å®Œåå¾—åˆ°çš„ç§¯åˆ†ï¼Œå®é™…ç§¯åˆ†è‚¯å®šé«˜äºæ­¤è®¡ç®—æ‰€å¾—ç§¯åˆ†ã€‚ä»¥ä¸‹åˆ—ä¸¾å…¶ä»–ç§¯åˆ†å¢é•¿é€”å¾„ï¼š<br />
          <strong
            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é¢†åœ°èµ„æºï¼š</strong
          >ä»æ´»åŠ¨å¼€å§‹å³éšæ—¶é—´å¢é•¿ï¼Œç›¸å½“äºæœ‰22h=1320min=1.32ä¸‡åŸºç¡€ç§¯åˆ†ï¼Œæœªç»Ÿè®¡å…¥å†…ã€‚<br />
          <strong
            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æŠ€æœ¯ç ”ç©¶(ç²¾ç ”åŒç†)ï¼š</strong
          >è™½ç”¨å¯ç”¨åŠ é€Ÿå¡ï¼Œä½†å¡ç”¨å®Œä¹‹åå†å¼€çš„æŠ€æœ¯ç ”ç©¶ä¹Ÿæ˜¯éšç€æ—¶é—´è¿›è¡Œç§¯åˆ†çš„ï¼Œæœ‰æ—¶æˆ–è®¸ç”šè‡³æœªå¼€æŠ€æœ¯ç ”ç©¶ç­‰ï¼Œæ­¤å¤„æ— æ³•ç»Ÿè®¡ã€‚<br />
          <strong
            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœŸåœ°è·å–ï¼š</strong
          >æ¸ é“è¿˜æœ‰å…¶ä»–ï¼Œä¾‹å¦‚å¾æˆ˜ï¼Œèµç¦ï¼Œéšæ—¶é—´å¢é•¿çš„å·¡è§†æ¬¡æ•°ç­‰ï¼Œæ•…æ­¤å¤„ä¸å¥½ç»Ÿè®¡ã€‚<br />
          <strong
            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœªè§å°¾æ•°ï¼š</strong
          >åœ¨è¾“å…¥é“å…·æ—¶ï¼Œå¦‚æœæ˜¯1.25ä¸‡ï¼Œåˆ™è®¡ç®—ä½¿ç”¨ä¸º12500ï¼Œä½†ä½ å®é™…å¯èƒ½æœ‰12566çš„é“å…·ï¼ˆè€Œæ¸¸æˆåªæ˜¾ç¤º1.25ä¸‡ï¼‰ï¼Œæ‰€ä»¥å­˜åœ¨å°¾æ•°æœªç®—è¿›å»çš„æƒ…å†µã€‚<br />
        </p>
      </div>
    </div>

    <script>
      function detectUnitFromUserInput(val) {
        const n = parseFloat(val);
        if (isNaN(n) || n < 0) return "wan";
        return n >= 100 ? "wan" : "yi";
      }

      function toPointsFromUserInput(val) {
        const n = parseFloat(val);
        if (isNaN(n) || n < 0) return 0;
        return n >= 100 ? n * 10000 : n * 100000000;
      }

      function normalizeInputCount(val) {
        const n = parseFloat(val);
        if (isNaN(n) || n <= 0) return 0;
        return n < 100 && String(val).includes(".") ? n * 10000 : n;
      }

      function formatWanVersion(points) {
        const wan = points / 10000;
        if (wan >= 10000) return (wan / 10000).toFixed(2) + " äº¿";
        return wan.toFixed(2) + " ä¸‡";
      }

      function formatYiVersion(points) {
        return (points / 100000000).toFixed(2) + " äº¿";
      }

      function calculatePoints() {
        const currentStr =
          document.getElementById("currentPointsValue").value.trim() || "0";
        const userUnit = detectUnitFromUserInput(currentStr);
        const currentPoints = toPointsFromUserInput(currentStr);

        const randomResourceCard = normalizeInputCount(
          document.getElementById("randomResourceCard").value
        );
        const selectedResourceCard = normalizeInputCount(
          document.getElementById("selectedResourceCard").value
        );
        const landDeed = normalizeInputCount(
          document.getElementById("landDeed").value
        );
        const techResearchCardCount = normalizeInputCount(
          document.getElementById("techResearchCardCount").value
        );
        const fineResearchCardCount = normalizeInputCount(
          document.getElementById("fineResearchCardCount").value
        );
        const advisorSelections = normalizeInputCount(
          document.getElementById("advisorSelections").value
        );

        const RESOURCE_POINTS_PER_MINUTE = 100;
        const ADVISOR_POINTS_PER_2_SELECTIONS = 1800;
        const LAND_POINTS_PER_10000 = 1500;
        const TECH_RESEARCH_POINTS_PER_MINUTE = 800;
        const FINE_RESEARCH_POINTS_PER_MINUTE = 1000;

        let totalPropPoints = 0;
        totalPropPoints += randomResourceCard * RESOURCE_POINTS_PER_MINUTE;
        totalPropPoints +=
          selectedResourceCard * (RESOURCE_POINTS_PER_MINUTE * 60);
        totalPropPoints += landDeed * LAND_POINTS_PER_10000;
        totalPropPoints +=
          techResearchCardCount * TECH_RESEARCH_POINTS_PER_MINUTE;
        totalPropPoints +=
          fineResearchCardCount * FINE_RESEARCH_POINTS_PER_MINUTE;
        totalPropPoints +=
          Math.floor(advisorSelections / 2) * ADVISOR_POINTS_PER_2_SELECTIONS;

        const finalPoints = currentPoints + totalPropPoints;

        const lines = [];
        lines.push(`é“å…·æ‰€å¾—ç§¯åˆ†ï¼š${(totalPropPoints / 10000).toFixed(2)} ä¸‡`);

        if (userUnit === "wan") {
          lines.push(`æœ€ç»ˆé¢„ä¼°ç§¯åˆ†ï¼š${formatWanVersion(finalPoints)}`);
          lines.push(`å³ï¼š${formatYiVersion(finalPoints)}`);
        } else {
          lines.push(`æœ€ç»ˆé¢„ä¼°ç§¯åˆ†ï¼š${formatYiVersion(finalPoints)}`);
        }

        document.getElementById("result").innerText = lines.join("\n");
      }
    </script>
  </body>
</html>
