<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¤©æœä¸Šå®ï¼ˆé‡Œç¨‹ï¼‰è®¡ç®—</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <style>
      .info-panel {
        margin-top: 30px;
        padding: 20px;
        background-color: #f7f7f7;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .info-panel h2 {
        font-size: 22px;
        color: #333;
        margin-bottom: 15px;
      }
      .info-panel p {
        font-size: 16px;
        color: #555;
        line-height: 1.8;
        text-align: left;
      }
      /* æ–°å¢ï¼šéšè—ç”¨çš„æ ·å¼ */
      .hidden {
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <button
        class="back-home-button"
        onclick="window.location.href='index.html'"
      >
        å›åˆ°é¦–é¡µ
      </button>

      <h1>
        å¤©æœä¸Šå®ï¼ˆé‡Œç¨‹ï¼‰è®¡ç®—<br />
        <a
          href="#tutorial"
          style="
            font-size: 14px;
            color: #1a73e8;
            text-decoration: underline;
            cursor: pointer;
          "
        >
          â¡ï¸ğŸ‘‰  ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯·ç‚¹æˆ‘æŸ¥çœ‹è¯´æ˜æ•™ç¨‹  ğŸ‘ˆâ¬…ï¸
        </a>
      </h1>

      <div class="input-container">
        <label for="currentMileageWan">å½“å‰å·²è·‘é‡Œç¨‹ï¼ˆä¸‡é‡Œï¼‰ï¼š</label>
        <input
          type="number"
          id="currentMileageWan"
          placeholder="ä¾‹å¦‚: 7.36 æˆ– 0"
          min="0"
          step="0.01"
        />
      </div>

      <div class="input-container">
        <label for="distancePerRound">æ¯è½®é‡Œç¨‹ï¼ˆé‡Œï¼‰ï¼š</label>
        <input
          type="number"
          id="distancePerRound"
          placeholder="ä¾‹å¦‚: 4000"
          min="1"
        />
      </div>

      <div class="input-container">
        <label for="cityCount">æ¯è½®è·¯çº¿åŸæ± æ•°é‡ï¼š</label>
        <input type="number" id="cityCount" placeholder="ä¾‹å¦‚: 2" min="0" />
      </div>

      <div class="input-container">
        <label for="speed">è½¦é€Ÿï¼š</label>
        <input type="number" id="speed" placeholder="ä¾‹å¦‚: 258" min="1" />
      </div>

      <div class="input-container">
        <label for="bunCount">æ‰“ç®—ä½¿ç”¨çš„è”åŠ›é¥¼æ•°é‡ï¼š</label>
        <input type="number" id="bunCount" placeholder="ä¾‹å¦‚: 150" min="0" />
      </div>

      <div class="input-container hidden" id="freeTimeContainer">
        <label for="freeHours">å½“å‰æ”’çš„å…è´¹æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ï¼š</label>
        <input
          type="number"
          id="freeHours"
          placeholder="ä¾‹å¦‚: 200 æˆ– 199.5"
          min="0"
          step="0.5"
        />
      </div>

      <button onclick="calcMileage()">è®¡ç®—æ‰€éœ€å¤§é¥¼</button>

      <div class="result" id="result"></div>

      <div class="info-panel" id="tutorial">
        <h2>è¯´æ˜</h2>
        <p>
          <strong>å‰æï¼š</strong>
          å·²å¼€é€šäº†12å…ƒçš„â€œå…«æ–¹èšè´¢â€ç‰¹æƒï¼Œå³å¯ä»¥ä½¿ç”¨ã€è‡ªåŠ¨è´¸æ˜“ã€‘åŠŸèƒ½ï¼
        </p>
        <p>
          <strong>å½“å‰å·²è·‘é‡Œç¨‹ï¼š</strong>
          æ‰“å¼€â€œå¤©æœä¸Šå®â€æ´»åŠ¨ç•Œé¢ï¼ˆåº•å±‚â€œä»»åŠ¡â€å¤„æŸ¥çœ‹ï¼‰ï¼Œå»ºè®®å…ˆä½¿ç”¨å®Œè‡ªå·±æ”’çš„200å°æ—¶å…è´¹æ—¶é•¿ï¼ˆç›¸å½“äºä½¿ç”¨400ä¸ªé¥¼ï¼‰ï¼Œè·å¾—åŸºç¡€å·²è·‘é‡Œç¨‹å€¼åï¼Œå†å¡«å…¥æ­¤å¤„åå†è®¡ç®—å‰©ä½™éœ€è¦è¡¥å……çš„é¥¼ã€‚
        </p>
        <p>
          <strong>æ¯è½®é‡Œç¨‹ï¼š</strong>
          æ‰“å¼€â€œè‡ªåŠ¨è´¸æ˜“â€ç•Œé¢ï¼Œé€‰æ‹©å›ºå®šè·¯çº¿åï¼Œç‚¹å‡»æŸåº§åŸå³ä¸Šè§’çš„é»„è‰²é”¯é½¿ï¼Œç•Œé¢çš„æ­£ä¸Šæ–¹â€œæ¯è½®è´¸æ˜“â€å¤„ï¼Œæœ‰æ¯è½®é‡Œç¨‹ä¿¡æ¯ã€‚
        </p>
        <p>
          <strong>æ¯è½®å›ºå®šè·¯çº¿çš„åŸæ± æ•°é‡ï¼š</strong>
          æ‰“å¼€â€œè‡ªåŠ¨è´¸æ˜“â€ç•Œé¢ï¼Œé€‰æ‹©å›ºå®šè·¯çº¿åï¼Œè®¾ç½®äº†å‡ åº§åŸå°±å¡«å‡ ï¼Œä¾‹å¦‚ï¼šä¸´æµ·-é’å·ï¼Œå°±æ˜¯2åº§åŸã€‚
        </p>
        <p>
          <strong>è‡ªå·±è½¦å­çš„é€Ÿåº¦ï¼š</strong>
          æ‰“å¼€â€œå•†é˜Ÿâ€ç•Œé¢ï¼ˆæ¯å¤©çœ‹å¹¿å‘Šé¢†è”åŠ›é¥¼çš„åœ°æ–¹çš„å³è¾¹å°±æ˜¯ï¼‰ï¼Œåœ¨å±æ€§è¯¦æƒ…å¤„å¯çœ‹åˆ°é€Ÿåº¦ã€‚
        </p>
        <p>
          <strong>è¯¯å·®è¯´æ˜ï¼š</strong>
          ç»“æœä¸ºæœŸæœ›å€¼ï¼Œå®é™…ä¼šæœ‰æ³¢åŠ¨ï¼Œç®—æ³•å·²å°½åŠ›ä¼˜åŒ–ï¼Œè¯¯å·®å¤§æ¦‚åœ¨10ä¸ªé¥¼ä»¥å†…ã€‚
        </p>
      </div>
    </div>

    <script>
      const currentMileageInput = document.getElementById("currentMileageWan");
      const freeTimeContainer = document.getElementById("freeTimeContainer");
      const freeHoursInput = document.getElementById("freeHours");

      currentMileageInput.addEventListener("input", function () {
        const v = parseFloat(this.value);
        if (!isNaN(v) && v === 0) {
          freeTimeContainer.classList.remove("hidden");
        } else {
          freeTimeContainer.classList.add("hidden");
          freeHoursInput.value = "";
        }
      });

      function calcMileage() {
        const MAX_TARGET = 100000;

        const currentMileageWan =
          parseFloat(document.getElementById("currentMileageWan").value) || 0;
        const routeDistance =
          parseFloat(document.getElementById("distancePerRound").value) || 0;
        const speed = parseFloat(document.getElementById("speed").value) || 0;
        const cityCount =
          parseFloat(document.getElementById("cityCount").value) || 0;
        const bunsOwned =
          parseFloat(document.getElementById("bunCount").value) || 0;
        const resultEl = document.getElementById("result");

        if (
          routeDistance <= 0 ||
          speed <= 0 ||
          currentMileageWan < 0 ||
          cityCount < 0 ||
          bunsOwned < 0
        ) {
          resultEl.innerText = "è¯·æ£€æŸ¥è¾“å…¥å‚æ•°ï¼šæ‰€æœ‰æ•°å€¼å¿…é¡»ä¸ºæ­£æ•°æˆ–é›¶ã€‚";
          return;
        }

        const currentMileage = currentMileageWan * 10000;
        const remainMileage = Math.max(0, MAX_TARGET - currentMileage);

        if (remainMileage === 0) {
          resultEl.innerText = "ç›®æ ‡å·²è¾¾æˆï¼Œæ— éœ€è¡¥å……è”åŠ›é¥¼ï¼";
          return;
        }

        const timePerRound = routeDistance / speed + cityCount;
        const totalTime = (remainMileage / routeDistance) * timePerRound;
        const bunsRequiredTotal = totalTime * 2;

        const bunsStillNeeded = Math.max(
          0,
          Math.ceil(bunsRequiredTotal - bunsOwned)
        );

        let outputText =
          `ç›®æ ‡æ€»é‡Œç¨‹ï¼š100000 é‡Œï¼ˆ10 wï¼‰\n` +
          `å‰©ä½™é‡Œç¨‹ï¼š${(remainMileage / 10000).toFixed(2)} \n` +
          `å®Œæˆå‰©ä½™é‡Œç¨‹æ‰€éœ€æ€»æ—¶é—´ï¼š${totalTime.toFixed(2)} å°æ—¶\n` +
          `â¡ï¸ ä»éœ€è¡¥å……çš„è”åŠ›é¥¼ï¼š${bunsStillNeeded.toLocaleString(
            "zh-CN"
          )} ä¸ª\n`;

        if (currentMileageWan === 0) {
          const freeHours = parseFloat(freeHoursInput.value) || 0;
          const bunsFromFreeTime = freeHours * 2;
          const bunsAfterFreeTime = Math.max(
            0,
            bunsStillNeeded - bunsFromFreeTime
          );

          outputText +=
            `ï¼ˆå…¶ä¸­ï¼šå…è´¹æ—¶é•¿æŠ˜ç®—è”åŠ›é¥¼çº¦ ${bunsFromFreeTime.toFixed(
              2
            )} ä¸ªï¼‰\n` +
            `â¡ï¸ å‡å»å…è´¹æ—¶é•¿åï¼Œè¿˜éœ€è¡¥çš„è”åŠ›é¥¼ï¼š${bunsAfterFreeTime.toLocaleString(
              "zh-CN"
            )} ä¸ª\n`;
        }

        resultEl.innerText = outputText + "\n";
      }
    </script>
  </body>
</html>
